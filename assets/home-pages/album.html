---
layout: page
title: album
icon: "fa-solid fa-image fa-fw"
permalink: /album.html
---

<article>
    <header><hgroup>
        <h1>
            <i class="{{ page.icon }}"></i>
            {{ page.title | capitalize }}
        </h1>
        <h2>Recall the old memories ...</h2>
    </hgroup></header>

    <div class="gallery" id="album"></div>

    <button onclick="shufflePics(pics); location.href='#page-top'">
        Click to shuffle
        <i class="fa-solid fa-shuffle"></i>
    </button>

    <footer>{% include comment.html %}</footer>
</article>

<script>
    // choose photos randomly
    const sample = (array, size=1) => {
        size = Math.max(0, Math.min(size, array.length))
        if (size == 0) return []
        const idx = Math.floor(Math.random() * array.length)
        const rest = [].concat(array.slice(0, idx), array.slice(idx + 1, array.length))
        return [array[idx]].concat(sample(rest, size - 1))
    }
    const shufflePics = (pics) => {
        const album = document.getElementById("album")
        album.innerHTML = ""
        sample(pics, 6).forEach(pic => {
            const item = document.createElement("div")
            item.classList.add("item")
            item.innerHTML = `<img src="${pic.path}"><p><a href="${pic.url}">${pic.info}</a></p>`
            album.appendChild(item)
        })
    }
    let pics = undefined
    window.addEventListener("load", () => {
        fetch("/assets/json/album.json").then(response => response.json()).then(data => {
            pics = data
            shufflePics(pics)
        })
    })
</script>
